(()=>{"use strict";let e=0;const n=async function(){const e=await fetch(`${h}${w.winners}${g([{key:"_page",value:"0"}])}`);return Number(e.headers.get("X-Total-Count"))},t=async()=>{e=await n(),_e.innerHTML=`Winners (${e})`,Xe.innerHTML=Math.ceil(e/10)},a=async function(){const e=await _();O.disabled=1==d,e<=7||d==Math.ceil(e/7)?V.disabled=!0:V.disabled=!1},c=async function(){if(await t(),1==m){je.disabled=!0;const e=document.querySelectorAll(".number");for(let n of Array.from(e))n.textContent=Array.from(e).indexOf(n)+1}else{je.disabled=!1;const e=document.querySelectorAll(".number");for(let n of Array.from(e))n.textContent=Array.from(e).indexOf(n)+(10*(m-1)+1)}let e=await n();e<=10||m==Math.ceil(e/10)?Pe.disabled=!0:Pe.disabled=!1};function i(e,n,t){document.getElementById(`${t}-NAME`).innerHTML=e,document.getElementById(`${t}-IMAGE`).innerHTML=`\n    <svg class="car_img" fill="${n}" id="${t}-IMAGE" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n    <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n    <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M1736.5,2103c-318.2-12.5-608.3-40.5-648.8-56.1c-196.5-84.2-377.4-876.5-427.3-1877.8l-21.8-399.3H485.6h-156L339-486l9.4-258.9l140.4-65.5c78-37.4,268.3-102.9,427.3-146.6l287-78l93.6,393C1402.7-208.3,1490-43,1670.9,63c102.9,59.3,121.6,59.3,720.6,15.6c564.6-40.5,623.9-53,729.9-121.6c196.5-134.1,265.1-268.3,340-667.5l65.5-361.8h1784.2h1781.1l102.9,389.9c102.9,393,168.5,517.8,324.4,642.5c102.9,81.1,124.8,81.1,761.1,46.8C8701.7-15,8807.8-30.6,8917-86.7c221.5-112.3,299.4-243.3,374.3-627l65.5-336.9l215.2,18.7c115.4,9.3,224.6,24.9,240.2,34.3c15.6,12.5,46.8,118.6,68.6,237.1c43.7,246.4,12.5,374.3-90.4,374.3c-53,0-62.4,31.2-74.9,258.9c-28.1,446.1-165.3,655.1-464.8,708.1c-240.2,43.7-1185.3,143.5-1899.6,202.8c-489.7,40.5-614.5,62.4-648.8,102.9c-21.8,28.1-106.1,159.1-190.3,287c-162.2,252.7-377.4,508.4-589.5,698.7l-134.1,121.7l-411.7,40.5C4328.6,2137.3,2987.3,2162.3,1736.5,2103z M3473.9,1841c65.5-12.5,65.5-15.6-65.5-411.7l-134.1-396.2l-168.4-9.4c-93.6-3.1-439.8,3.1-773.6,15.6l-605.1,24.9l-90.5,112.3l-87.3,109.2l78,218.3c43.7,118.5,96.7,255.8,115.4,302.6l34.3,87.3l814.1-18.7C3040.3,1866,3436.4,1850.4,3473.9,1841z M6047.3,1301.4c149.7-249.5,271.4-455.4,265.1-458.5c-3.1-3.1-427.3,12.5-942,37.4c-514.7,21.8-960.7,40.5-991.9,43.7c-49.9,0-53,24.9-37.4,258.9c9.4,140.4,24.9,330.6,34.3,421.1l15.6,162.2l692.5-6.2l689.4-9.4L6047.3,1301.4z M9515.9,300.1c21.8-15.6,56.1-87.3,78-159.1c21.8-71.7,46.8-146.6,56.1-171.6c12.5-34.3-21.8-43.7-156-43.7h-174.7l-137.2,212.1c-71.7,115.4-143.5,224.6-156,243.3C9001.2,424.9,9459.7,350,9515.9,300.1z"/><path d="M245.5,1136c-15.6-21.8-56.2-109.2-84.2-196.5C98.8,771.1,80.1,253.3,123.8,44.3l25-118.5h184h187.2v321.3c0,287,31.2,605.2,81.1,842.2c18.7,84.2,15.6,84.2-152.8,84.2C348.4,1173.5,264.2,1157.9,245.5,1136z"/><path d="M1674.1-155.3c-115.4-109.2-140.4-159.1-221.5-446c-49.9-180.9-90.5-343.1-90.5-368.1c0-74.9,62.4-40.5,81.1,46.8c78,340,433.6,636.3,817.2,683.1c414.9,46.8,864-268.3,976.3-683.1c15.6-65.5,43.7-118.5,59.3-118.5c40.5,0,40.5-12.5-18.7,318.2c-56.1,302.5-127.9,436.7-283.9,542.7c-102.9,68.6-118.5,71.7-904.6,124.8l-283.8,18.7L1674.1-155.3z"/><path d="M7625.6-158.4c-143.5-99.8-202.7-202.8-287-511.6c-90.4-333.7-93.6-371.2-49.9-371.2c18.7,0,31.2,25,31.2,56.1c3.1,99.8,127.9,333.8,243.3,452.3c502.2,520.9,1353.8,315,1553.4-374.3c25-90.5,62.4-165.3,78-165.3c18.7,0,25,25,15.6,56.1c-6.2,28.1-31.2,156-53,283.8c-43.7,252.7-118.6,386.8-268.3,489.7c-112.3,74.9-240.2,96.7-789.2,121.7C7753.5-102.3,7700.5-108.6,7625.6-158.4z"/><path d="M2029.7-476.6c-174.7-78-343.1-262-399.3-433.6c-96.7-277.6-46.8-520.9,149.7-745.5c159.1-180.9,324.4-255.8,561.5-258.9c227.7,0,408.6,81.1,561.5,249.5c99.8,109.2,205.9,368.1,205.9,499.1c0,28-21.8,124.8-49.9,215.2c-56.1,193.4-215.2,380.6-399.3,467.9C2488.2-398.6,2207.5-395.5,2029.7-476.6z M2578.7-698.1c171.6-87.3,258.9-224.6,274.5-433.6c31.2-486.6-514.7-745.5-864-414.9C1546.2-1125.4,2035.9-420.5,2578.7-698.1z"/><path d="M7878.3-504.7c-533.4-274.5-533.4-1048.1,0-1322.6c393-205.9,885.8-28.1,1054.3,374.3c68.6,162.2,56.1,452.3-21.8,614.5C8726.7-454.8,8258.8-305.1,7878.3-504.7z M8474-704.3c439.8-221.5,336.9-889-146.6-979.5c-165.3-31.2-315,15.6-449.2,134.2c-215.2,193.4-237.1,505.3-49.9,717.4C8009.3-626.3,8233.8-582.7,8474-704.3z"/></g></g>\n    </svg>\n  `}const s=async function(e){const n=document.documentElement.clientWidth;document.getElementById(`${e}-START`).disabled=!0,document.getElementById(`${e}-BACK`).disabled=!1;const t=await b(e),a=t.distance/t.velocity,c=document.getElementById(`${e}-IMAGE`);let i=null,s={};console.log(s),s.id=window.requestAnimationFrame((function e(t){i||(i=t);const l=t-i,o=n-200,r=Math.round(l*(o/a));return c.style.transform=`translateX(${Math.min(r,o)}px)`,r<o&&(s.id=window.requestAnimationFrame(e)),s}));const{success:l}=await L(e);if(l||window.cancelAnimationFrame(s.id),!0===l)return a;window.cancelAnimationFrame(s.id)},l=async function(e){document.getElementById(`${e}-START`).disabled=!1,document.getElementById(`${e}-BACK`).disabled=!0;const n=document.getElementById(`${e}-IMAGE`),t={};function a(){n.style.transform="translateX(-1px)",t.id=window.requestAnimationFrame(a)}t.id=window.requestAnimationFrame(a);const{success:c}=await f(e);c&&window.cancelAnimationFrame(t.id),window.requestAnimationFrame(a),window.cancelAnimationFrame(t.id),window.location.reload()};let o=0;const r=async()=>{o=await async function(){try{const e=await fetch(`${h}${w.garage}${g([{key:"_page",value:"0"}])}`);return Number(e.headers.get("X-Total-Count"))}catch(e){alert(e)}}(),we.innerHTML=`Garage (${o})`,J.innerHTML=Math.ceil(o/7)};let d=1,m=1;const u=async()=>{const e=await v([{key:"_page",value:d},{key:"_limit",value:7}]);document.querySelectorAll(".car").forEach((e=>e.remove())),e.forEach((e=>function(e,n,t){const c=document.createElement("div");c.className="car",c.id=`${t}`;const i=document.createElement("div");i.className="car_settings";const o=document.createElement("button");o.className="identic_btn car_btn select",o.setAttribute("id",`${t}-SELECT`),o.innerHTML="SELECT";const d=document.createElement("button");d.className="identic_btn car_btn",d.setAttribute("id",`${t}-REMOVE`),d.innerHTML="X";const m=document.createElement("a");m.className="car_name",m.setAttribute("id",`${t}-NAME`),m.innerHTML=`${e}`,i.appendChild(o),i.appendChild(d),i.appendChild(m);const h=document.createElement("div");h.className="car_road";const w=document.createElement("div");w.className="car_road_top";const g=document.createElement("div");g.className="car_road_buttons";const v=document.createElement("button");v.className="drive_btn",v.setAttribute("id",`${t}-START`),v.innerHTML='<img width="15"\n  src="./src/assets/play.png"\n  alt="play">';const C=document.createElement("button");C.className="drive_btn",C.setAttribute("id",`${t}-BACK`),C.setAttribute("disabled",!0),C.innerHTML='<img width="15"\n  src="./src/assets/stop.png"\n  alt="stop">';const _=document.createElement("svg");_.innerHTML=`<svg class="car_img" fill="${n}" id="${t}-IMAGE" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n  <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n  <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M1736.5,2103c-318.2-12.5-608.3-40.5-648.8-56.1c-196.5-84.2-377.4-876.5-427.3-1877.8l-21.8-399.3H485.6h-156L339-486l9.4-258.9l140.4-65.5c78-37.4,268.3-102.9,427.3-146.6l287-78l93.6,393C1402.7-208.3,1490-43,1670.9,63c102.9,59.3,121.6,59.3,720.6,15.6c564.6-40.5,623.9-53,729.9-121.6c196.5-134.1,265.1-268.3,340-667.5l65.5-361.8h1784.2h1781.1l102.9,389.9c102.9,393,168.5,517.8,324.4,642.5c102.9,81.1,124.8,81.1,761.1,46.8C8701.7-15,8807.8-30.6,8917-86.7c221.5-112.3,299.4-243.3,374.3-627l65.5-336.9l215.2,18.7c115.4,9.3,224.6,24.9,240.2,34.3c15.6,12.5,46.8,118.6,68.6,237.1c43.7,246.4,12.5,374.3-90.4,374.3c-53,0-62.4,31.2-74.9,258.9c-28.1,446.1-165.3,655.1-464.8,708.1c-240.2,43.7-1185.3,143.5-1899.6,202.8c-489.7,40.5-614.5,62.4-648.8,102.9c-21.8,28.1-106.1,159.1-190.3,287c-162.2,252.7-377.4,508.4-589.5,698.7l-134.1,121.7l-411.7,40.5C4328.6,2137.3,2987.3,2162.3,1736.5,2103z M3473.9,1841c65.5-12.5,65.5-15.6-65.5-411.7l-134.1-396.2l-168.4-9.4c-93.6-3.1-439.8,3.1-773.6,15.6l-605.1,24.9l-90.5,112.3l-87.3,109.2l78,218.3c43.7,118.5,96.7,255.8,115.4,302.6l34.3,87.3l814.1-18.7C3040.3,1866,3436.4,1850.4,3473.9,1841z M6047.3,1301.4c149.7-249.5,271.4-455.4,265.1-458.5c-3.1-3.1-427.3,12.5-942,37.4c-514.7,21.8-960.7,40.5-991.9,43.7c-49.9,0-53,24.9-37.4,258.9c9.4,140.4,24.9,330.6,34.3,421.1l15.6,162.2l692.5-6.2l689.4-9.4L6047.3,1301.4z M9515.9,300.1c21.8-15.6,56.1-87.3,78-159.1c21.8-71.7,46.8-146.6,56.1-171.6c12.5-34.3-21.8-43.7-156-43.7h-174.7l-137.2,212.1c-71.7,115.4-143.5,224.6-156,243.3C9001.2,424.9,9459.7,350,9515.9,300.1z"/><path d="M245.5,1136c-15.6-21.8-56.2-109.2-84.2-196.5C98.8,771.1,80.1,253.3,123.8,44.3l25-118.5h184h187.2v321.3c0,287,31.2,605.2,81.1,842.2c18.7,84.2,15.6,84.2-152.8,84.2C348.4,1173.5,264.2,1157.9,245.5,1136z"/><path d="M1674.1-155.3c-115.4-109.2-140.4-159.1-221.5-446c-49.9-180.9-90.5-343.1-90.5-368.1c0-74.9,62.4-40.5,81.1,46.8c78,340,433.6,636.3,817.2,683.1c414.9,46.8,864-268.3,976.3-683.1c15.6-65.5,43.7-118.5,59.3-118.5c40.5,0,40.5-12.5-18.7,318.2c-56.1,302.5-127.9,436.7-283.9,542.7c-102.9,68.6-118.5,71.7-904.6,124.8l-283.8,18.7L1674.1-155.3z"/><path d="M7625.6-158.4c-143.5-99.8-202.7-202.8-287-511.6c-90.4-333.7-93.6-371.2-49.9-371.2c18.7,0,31.2,25,31.2,56.1c3.1,99.8,127.9,333.8,243.3,452.3c502.2,520.9,1353.8,315,1553.4-374.3c25-90.5,62.4-165.3,78-165.3c18.7,0,25,25,15.6,56.1c-6.2,28.1-31.2,156-53,283.8c-43.7,252.7-118.6,386.8-268.3,489.7c-112.3,74.9-240.2,96.7-789.2,121.7C7753.5-102.3,7700.5-108.6,7625.6-158.4z"/><path d="M2029.7-476.6c-174.7-78-343.1-262-399.3-433.6c-96.7-277.6-46.8-520.9,149.7-745.5c159.1-180.9,324.4-255.8,561.5-258.9c227.7,0,408.6,81.1,561.5,249.5c99.8,109.2,205.9,368.1,205.9,499.1c0,28-21.8,124.8-49.9,215.2c-56.1,193.4-215.2,380.6-399.3,467.9C2488.2-398.6,2207.5-395.5,2029.7-476.6z M2578.7-698.1c171.6-87.3,258.9-224.6,274.5-433.6c31.2-486.6-514.7-745.5-864-414.9C1546.2-1125.4,2035.9-420.5,2578.7-698.1z"/><path d="M7878.3-504.7c-533.4-274.5-533.4-1048.1,0-1322.6c393-205.9,885.8-28.1,1054.3,374.3c68.6,162.2,56.1,452.3-21.8,614.5C8726.7-454.8,8258.8-305.1,7878.3-504.7z M8474-704.3c439.8-221.5,336.9-889-146.6-979.5c-165.3-31.2-315,15.6-449.2,134.2c-215.2,193.4-237.1,505.3-49.9,717.4C8009.3-626.3,8233.8-582.7,8474-704.3z"/></g></g>\n  </svg>`;const M=document.createElement("img");M.className="flag_img",M.setAttribute("src","./src/assets/flag-finish.svg"),M.setAttribute("alt","finish"),g.appendChild(v),g.appendChild(C),w.appendChild(g),w.appendChild(_),w.appendChild(M),h.appendChild(w);const b=document.createElement("hr");h.appendChild(b),c.appendChild(i),c.appendChild(h),ve.appendChild(c),d.addEventListener("click",(()=>async function(e){await y(e),document.getElementById(e).remove(),await N(e),u(),p()}(t))),o.addEventListener("click",(()=>async function(e){const n=await E(e);let t=document.getElementById(`${e}-NAME`);re.disabled=!1,le.value=n.name,oe.value=n.color,t.classList.add("active")}(t))),v.addEventListener("click",(()=>s(t))),C.addEventListener("click",(()=>l(t))),r(),a()}(e.name,e.color,e.id)))},p=async()=>{document.querySelectorAll(".winner_row").forEach((e=>e.remove()));const e=await $([{key:"_page",value:m},{key:"_limit",value:10}]);console.log(e),e.forEach((e=>async function(e){const n=document.createElement("tr");n.className="winner_row";const a=await E(e),i=await T(e);n.innerHTML=`\n    \n                                <td class="number"></td>\n                                <td class="car_mini">\n                                <svg class="car_img_mini" id="${e}"\n                                fill="${a.color}"  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n                                <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n                                <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M1736.5,2103c-318.2-12.5-608.3-40.5-648.8-56.1c-196.5-84.2-377.4-876.5-427.3-1877.8l-21.8-399.3H485.6h-156L339-486l9.4-258.9l140.4-65.5c78-37.4,268.3-102.9,427.3-146.6l287-78l93.6,393C1402.7-208.3,1490-43,1670.9,63c102.9,59.3,121.6,59.3,720.6,15.6c564.6-40.5,623.9-53,729.9-121.6c196.5-134.1,265.1-268.3,340-667.5l65.5-361.8h1784.2h1781.1l102.9,389.9c102.9,393,168.5,517.8,324.4,642.5c102.9,81.1,124.8,81.1,761.1,46.8C8701.7-15,8807.8-30.6,8917-86.7c221.5-112.3,299.4-243.3,374.3-627l65.5-336.9l215.2,18.7c115.4,9.3,224.6,24.9,240.2,34.3c15.6,12.5,46.8,118.6,68.6,237.1c43.7,246.4,12.5,374.3-90.4,374.3c-53,0-62.4,31.2-74.9,258.9c-28.1,446.1-165.3,655.1-464.8,708.1c-240.2,43.7-1185.3,143.5-1899.6,202.8c-489.7,40.5-614.5,62.4-648.8,102.9c-21.8,28.1-106.1,159.1-190.3,287c-162.2,252.7-377.4,508.4-589.5,698.7l-134.1,121.7l-411.7,40.5C4328.6,2137.3,2987.3,2162.3,1736.5,2103z M3473.9,1841c65.5-12.5,65.5-15.6-65.5-411.7l-134.1-396.2l-168.4-9.4c-93.6-3.1-439.8,3.1-773.6,15.6l-605.1,24.9l-90.5,112.3l-87.3,109.2l78,218.3c43.7,118.5,96.7,255.8,115.4,302.6l34.3,87.3l814.1-18.7C3040.3,1866,3436.4,1850.4,3473.9,1841z M6047.3,1301.4c149.7-249.5,271.4-455.4,265.1-458.5c-3.1-3.1-427.3,12.5-942,37.4c-514.7,21.8-960.7,40.5-991.9,43.7c-49.9,0-53,24.9-37.4,258.9c9.4,140.4,24.9,330.6,34.3,421.1l15.6,162.2l692.5-6.2l689.4-9.4L6047.3,1301.4z M9515.9,300.1c21.8-15.6,56.1-87.3,78-159.1c21.8-71.7,46.8-146.6,56.1-171.6c12.5-34.3-21.8-43.7-156-43.7h-174.7l-137.2,212.1c-71.7,115.4-143.5,224.6-156,243.3C9001.2,424.9,9459.7,350,9515.9,300.1z"/><path d="M245.5,1136c-15.6-21.8-56.2-109.2-84.2-196.5C98.8,771.1,80.1,253.3,123.8,44.3l25-118.5h184h187.2v321.3c0,287,31.2,605.2,81.1,842.2c18.7,84.2,15.6,84.2-152.8,84.2C348.4,1173.5,264.2,1157.9,245.5,1136z"/><path d="M1674.1-155.3c-115.4-109.2-140.4-159.1-221.5-446c-49.9-180.9-90.5-343.1-90.5-368.1c0-74.9,62.4-40.5,81.1,46.8c78,340,433.6,636.3,817.2,683.1c414.9,46.8,864-268.3,976.3-683.1c15.6-65.5,43.7-118.5,59.3-118.5c40.5,0,40.5-12.5-18.7,318.2c-56.1,302.5-127.9,436.7-283.9,542.7c-102.9,68.6-118.5,71.7-904.6,124.8l-283.8,18.7L1674.1-155.3z"/><path d="M7625.6-158.4c-143.5-99.8-202.7-202.8-287-511.6c-90.4-333.7-93.6-371.2-49.9-371.2c18.7,0,31.2,25,31.2,56.1c3.1,99.8,127.9,333.8,243.3,452.3c502.2,520.9,1353.8,315,1553.4-374.3c25-90.5,62.4-165.3,78-165.3c18.7,0,25,25,15.6,56.1c-6.2,28.1-31.2,156-53,283.8c-43.7,252.7-118.6,386.8-268.3,489.7c-112.3,74.9-240.2,96.7-789.2,121.7C7753.5-102.3,7700.5-108.6,7625.6-158.4z"/><path d="M2029.7-476.6c-174.7-78-343.1-262-399.3-433.6c-96.7-277.6-46.8-520.9,149.7-745.5c159.1-180.9,324.4-255.8,561.5-258.9c227.7,0,408.6,81.1,561.5,249.5c99.8,109.2,205.9,368.1,205.9,499.1c0,28-21.8,124.8-49.9,215.2c-56.1,193.4-215.2,380.6-399.3,467.9C2488.2-398.6,2207.5-395.5,2029.7-476.6z M2578.7-698.1c171.6-87.3,258.9-224.6,274.5-433.6c31.2-486.6-514.7-745.5-864-414.9C1546.2-1125.4,2035.9-420.5,2578.7-698.1z"/><path d="M7878.3-504.7c-533.4-274.5-533.4-1048.1,0-1322.6c393-205.9,885.8-28.1,1054.3,374.3c68.6,162.2,56.1,452.3-21.8,614.5C8726.7-454.8,8258.8-305.1,7878.3-504.7z M8474-704.3c439.8-221.5,336.9-889-146.6-979.5c-165.3-31.2-315,15.6-449.2,134.2c-215.2,193.4-237.1,505.3-49.9,717.4C8009.3-626.3,8233.8-582.7,8474-704.3z"/></g></g>\n                                </svg>\n  \n                                </td>\n                                <td class="car_mini_name">${a.name}</td>\n                                <td class="car_mini_wins">${i.wins}</td>\n                                <td class="car_mini_time">${i.time}</td>\n                                `,document.querySelector(".winners_body").append(n),t(),c()}(e.id,e.wins,e.time))),document.querySelectorAll(".winner_row").forEach((e=>e.remove())),c()};document.querySelectorAll(".winner-row");const h="https://async-race-backend-xucy.onrender.com",w={garage:"/garage",engine:"/engine",winners:"/winners"},g=(e=[])=>e.length?`?${e.map((e=>`${e.key}=${e.value}`)).join("&")}`:"",v=async function(e){const n=await fetch(`${h}${w.garage}${g(e)}`);return await n.json()},C=async function(e){const n=await fetch(`${h}${w.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await n.json()},y=async function(e){const n=await fetch(`${h}${w.garage}/${e}`,{method:"DELETE"});return await n.json()},_=async function(){try{const e=await fetch(`${h}${w.garage}${g([{key:"_page",value:"0"}])}`);return Number(e.headers.get("X-Total-Count"))}catch(e){alert(e)}},E=async function(e){const n=await fetch(`${h}${w.garage}/${e}`);return await n.json()},M=async function(e,n){const t=await fetch(`${h}${w.garage}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await t.json()},b=async e=>{const n=await fetch(`${h}${w.engine}${g([{key:"id",value:e},{key:"status",value:"started"}])}`,{method:"PATCH"});return await n.json()},L=async e=>{const n=await fetch(`${h}${w.engine}${g([{key:"id",value:e},{key:"status",value:"drive"}])}`,{method:"PATCH"}).catch();return 200!==n.status?{success:!1}:{...await n.json()}},f=async e=>{const n=await fetch(`${h}${w.engine}${g([{key:"id",value:e},{key:"status",value:"stopped"}])}`,{method:"PATCH"}).catch();return 200!==n.status?{success:!1}:{...await n.json()}},$=async e=>{const n=await fetch(`${h}${w.winners}${g(e)}`);return await n.json()},T=async function(e){const n=await fetch(`${h}${w.winners}/${e}`);return await n.json()},N=async function(e){const n=await fetch(`${h}${w.winners}/${e}`,{method:"DELETE"});return await n.json()},k=["Apollo","Chrysler","Dacia","Daewoo","DAF","Daihatsu","Datsun","Dodge","Hudson","Hummer","Hyundai","Lifan","Lincoln","Maserati","Maybach","Mazda","MCLaren","Mercedes-Benz","Mitsubishi","Nissan","Opel","Peugeot","Porsche","Range Rover","Ravon","Renault","Rolls-Royce","Saab","Seat","Skoda","Smart","SsangYong","Subaru","Suzuki","Tata","Tesla","Toyota","Volkswagen","Volvo"],H=["Durango","Ram","Challenger","Charger","Grand Caravan","X7","X5","X3","X6 M","X6","X1","X4","C3 Aircross","Duster","CR-V","Corolla","C4 Cactus","C1","C3","UX 250h","NX 300h","LC 500","Rapid","Largus","IS 200t","LS 500h","RX","Hatchback","CX-5","Sedan","CX-30","CX-9","CX-5","MX-5","Roadster","Phantom","Camry","Polo","Cullinan","Ghost","Dawn","Duster","Arkana","Sandero","Logan","Logan MCV","Captur","Kadjar","RAV4","Rio","Creta","Solaris"],A=document.createElement("div");A.className="modal",A.setAttribute("id","myModal");const x=document.createElement("div");x.className="modal-content";const S=document.createElement("span");S.className="close",S.innerHTML="X";const z=document.createElement("h3");z.innerHTML="The Winner is";const I=document.createElement("b");I.className="winner_car",I.innerHTML="Mersedes";const j=document.createElement("span");j.innerHTML="with time";const q=document.createElement("b");q.className="winer_time",q.innerHTML="5.0";const B=document.createElement("span");B.innerHTML="sec",x.appendChild(S),x.appendChild(z),x.appendChild(I),x.appendChild(j),x.appendChild(q),x.appendChild(B),A.appendChild(x),S.onclick=function(){A.style.display="none"},window.onclick=function(e){e.target==A&&(A.style.display="none")};const X=async function(){const e={minTime:1e6,valWinID:"",wins:1},n=document.querySelectorAll(".car"),t=[];for(const e of n)t.push(e.id);const a=t.map((async n=>{const t=(await s(n)).toString(),a=Number(t);a<e.minTime&&(e.minTime=a,e.valWinID=n)}));await Promise.any(a),async function(e,n){const t=await E(n);console.log(t),document.querySelector(".winner_car").textContent=t.name,document.querySelector(".winer_time").textContent=e,A.style.display="flex"}((e.minTime/1e3).toFixed(2),e.valWinID),await(async e=>{try{const n=await fetch(`${h}${w.winners}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await n.json()}catch(n){(async(e,n)=>{const t=await T(e),a={wins:1,time:n};t.id===e&&(a.wins=t.wins+=1),t.id===e&&n<t.time?(console.log(n),console.log(a.time=n),a.time=n):(console.log(a.time=t.time),a.time=t.time);const c=await fetch(`${h}${w.winners}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});try{if(!c.ok)throw new Error(c.statusText);await c.json()}catch(e){console.log("Caught error: status 404 - winner was not found in the garage")}})(e.id,e.time)}})({id:Number(e.valWinID),wins:e.wins,time:(e.minTime/1e3).toFixed(2)}),p()},P=async e=>{console.log(e);let n=document.querySelectorAll(".winner_row");for(let e of n)e.remove();const a=await v();console.log(a),e.forEach((e=>{for(let n of a)if(n.id==e.id){let t=document.createElement("tr");t.classList.add("winner_row"),t.id=`winner_row-${n.id}`,t.innerHTML=`\n  \n          <td class="number"></td>\n          <td class="car_mini">\n          <svg class="car_img_mini"\n          fill="${n.color}"  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n          <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>\n          <g><g transform="translate(0.000000,511.000000) scale(0.100000,-0.100000)"><path d="M1736.5,2103c-318.2-12.5-608.3-40.5-648.8-56.1c-196.5-84.2-377.4-876.5-427.3-1877.8l-21.8-399.3H485.6h-156L339-486l9.4-258.9l140.4-65.5c78-37.4,268.3-102.9,427.3-146.6l287-78l93.6,393C1402.7-208.3,1490-43,1670.9,63c102.9,59.3,121.6,59.3,720.6,15.6c564.6-40.5,623.9-53,729.9-121.6c196.5-134.1,265.1-268.3,340-667.5l65.5-361.8h1784.2h1781.1l102.9,389.9c102.9,393,168.5,517.8,324.4,642.5c102.9,81.1,124.8,81.1,761.1,46.8C8701.7-15,8807.8-30.6,8917-86.7c221.5-112.3,299.4-243.3,374.3-627l65.5-336.9l215.2,18.7c115.4,9.3,224.6,24.9,240.2,34.3c15.6,12.5,46.8,118.6,68.6,237.1c43.7,246.4,12.5,374.3-90.4,374.3c-53,0-62.4,31.2-74.9,258.9c-28.1,446.1-165.3,655.1-464.8,708.1c-240.2,43.7-1185.3,143.5-1899.6,202.8c-489.7,40.5-614.5,62.4-648.8,102.9c-21.8,28.1-106.1,159.1-190.3,287c-162.2,252.7-377.4,508.4-589.5,698.7l-134.1,121.7l-411.7,40.5C4328.6,2137.3,2987.3,2162.3,1736.5,2103z M3473.9,1841c65.5-12.5,65.5-15.6-65.5-411.7l-134.1-396.2l-168.4-9.4c-93.6-3.1-439.8,3.1-773.6,15.6l-605.1,24.9l-90.5,112.3l-87.3,109.2l78,218.3c43.7,118.5,96.7,255.8,115.4,302.6l34.3,87.3l814.1-18.7C3040.3,1866,3436.4,1850.4,3473.9,1841z M6047.3,1301.4c149.7-249.5,271.4-455.4,265.1-458.5c-3.1-3.1-427.3,12.5-942,37.4c-514.7,21.8-960.7,40.5-991.9,43.7c-49.9,0-53,24.9-37.4,258.9c9.4,140.4,24.9,330.6,34.3,421.1l15.6,162.2l692.5-6.2l689.4-9.4L6047.3,1301.4z M9515.9,300.1c21.8-15.6,56.1-87.3,78-159.1c21.8-71.7,46.8-146.6,56.1-171.6c12.5-34.3-21.8-43.7-156-43.7h-174.7l-137.2,212.1c-71.7,115.4-143.5,224.6-156,243.3C9001.2,424.9,9459.7,350,9515.9,300.1z"/><path d="M245.5,1136c-15.6-21.8-56.2-109.2-84.2-196.5C98.8,771.1,80.1,253.3,123.8,44.3l25-118.5h184h187.2v321.3c0,287,31.2,605.2,81.1,842.2c18.7,84.2,15.6,84.2-152.8,84.2C348.4,1173.5,264.2,1157.9,245.5,1136z"/><path d="M1674.1-155.3c-115.4-109.2-140.4-159.1-221.5-446c-49.9-180.9-90.5-343.1-90.5-368.1c0-74.9,62.4-40.5,81.1,46.8c78,340,433.6,636.3,817.2,683.1c414.9,46.8,864-268.3,976.3-683.1c15.6-65.5,43.7-118.5,59.3-118.5c40.5,0,40.5-12.5-18.7,318.2c-56.1,302.5-127.9,436.7-283.9,542.7c-102.9,68.6-118.5,71.7-904.6,124.8l-283.8,18.7L1674.1-155.3z"/><path d="M7625.6-158.4c-143.5-99.8-202.7-202.8-287-511.6c-90.4-333.7-93.6-371.2-49.9-371.2c18.7,0,31.2,25,31.2,56.1c3.1,99.8,127.9,333.8,243.3,452.3c502.2,520.9,1353.8,315,1553.4-374.3c25-90.5,62.4-165.3,78-165.3c18.7,0,25,25,15.6,56.1c-6.2,28.1-31.2,156-53,283.8c-43.7,252.7-118.6,386.8-268.3,489.7c-112.3,74.9-240.2,96.7-789.2,121.7C7753.5-102.3,7700.5-108.6,7625.6-158.4z"/><path d="M2029.7-476.6c-174.7-78-343.1-262-399.3-433.6c-96.7-277.6-46.8-520.9,149.7-745.5c159.1-180.9,324.4-255.8,561.5-258.9c227.7,0,408.6,81.1,561.5,249.5c99.8,109.2,205.9,368.1,205.9,499.1c0,28-21.8,124.8-49.9,215.2c-56.1,193.4-215.2,380.6-399.3,467.9C2488.2-398.6,2207.5-395.5,2029.7-476.6z M2578.7-698.1c171.6-87.3,258.9-224.6,274.5-433.6c31.2-486.6-514.7-745.5-864-414.9C1546.2-1125.4,2035.9-420.5,2578.7-698.1z"/><path d="M7878.3-504.7c-533.4-274.5-533.4-1048.1,0-1322.6c393-205.9,885.8-28.1,1054.3,374.3c68.6,162.2,56.1,452.3-21.8,614.5C8726.7-454.8,8258.8-305.1,7878.3-504.7z M8474-704.3c439.8-221.5,336.9-889-146.6-979.5c-165.3-31.2-315,15.6-449.2,134.2c-215.2,193.4-237.1,505.3-49.9,717.4C8009.3-626.3,8233.8-582.7,8474-704.3z"/></g></g>\n          </svg>\n  \n          </td>\n          <td class="car_mini_name">${n.name}</td>\n          <td class="car_mini_wins">${e.wins}</td>\n          <td class="car_mini_time">${e.time}</td>\n          `,Me.append(t)}t(),c()}))},R=document.createElement("header");R.innerHTML='\n<div class="wrapper">\n  <div class="header_wrapper">\n    <div class="box">\n      <span></span>\n      <h1 >Async Race</h1>\n    </div>\n  \n    <div class="switch">\n      <button class="header_btn to_garage_btn">to garage</button>\n      <button class="header_btn to_winners_btn">to winners</button>\n    </div>\n  </div>\n</div>\n',document.body.appendChild(R);const D=document.createElement("h3");D.className="winners_page",D.innerHTML="Page <span>&#8470 </span> 1";const G=document.createElement("main"),F=document.createElement("span");F.className="garage_page_current",F.innerHTML="1";const O=document.createElement("button");O.className="identic_btn pagination_btn garage_page_prev",O.setAttribute("disabled",!0),O.innerHTML="Previous";const V=document.createElement("button");V.className="identic_btn pagination_btn garage_page_next",V.innerHTML="Next";const W=document.createElement("div");W.className="garage_pagination";const U=document.createElement("span");U.innerHTML="/";const J=document.createElement("span");J.className="page_total",J.innerHTML="1",W.appendChild(O),W.appendChild(F),W.appendChild(U),W.appendChild(J),W.appendChild(V);const K=document.createElement("div");K.className="wrapper";const Y=document.createElement("div");Y.className="main_wrapper";const Q=document.createElement("section");Q.className="garage";const Z=document.createElement("div");Z.className="garage_settings";const ee=document.createElement("div");ee.className="garage_settings_row create_set";const ne=document.createElement("div");ne.className="input_block";const te=document.createElement("input");te.className="create_input",te.type="text",te.placeholder="Create car...";const ae=document.createElement("input");ae.className="create_color",ae.type="color",ae.value="#ffba08";const ce=document.createElement("button");ce.className="identic_btn create_btn",ce.innerHTML="Create",ne.appendChild(te),ne.appendChild(ae),ee.appendChild(ne),ee.appendChild(ce),Z.appendChild(ee);const ie=document.createElement("div");ie.className="garage_settings_row create_set";const se=document.createElement("div");se.className="input_block";const le=document.createElement("input");le.className="update_input",le.type="text",le.placeholder="Update car...";const oe=document.createElement("input");oe.className="create_color",oe.type="color",oe.value="#000000";const re=document.createElement("button");re.className="identic_btn update_btn",re.innerHTML="Update",se.appendChild(le),se.appendChild(oe),ie.appendChild(se),ie.appendChild(re),Z.appendChild(ie);const de=document.createElement("div");de.className="garage_settings_row";const me=document.createElement("button");me.className="identic_btn race_btn",me.innerHTML="Race";const ue=document.createElement("button");ue.className="identic_btn reset_btn",ue.innerHTML="Reset";const pe=document.createElement("button");pe.className="identic_btn generate_btn",pe.innerHTML="Generate cars",de.appendChild(me),de.appendChild(ue),de.appendChild(pe),Z.appendChild(de);const he=document.createElement("div");he.className="garage_wrapper";const we=document.createElement("h2");we.className="garage_counter",we.innerHTML="Garage";const ge=document.createElement("h3");ge.className="garage_page",ge.innerHTML="Page <span>&#8470 </span>1 ";const ve=document.createElement("div");ve.className="car_section",he.appendChild(we),he.appendChild(ge),he.appendChild(ve),he.appendChild(W),Q.appendChild(Z),Q.appendChild(he),Y.appendChild(Q);const Ce=document.createElement("section");Ce.className="winners invisible";const ye=document.createElement("div");ye.className="winners_wrapper";const _e=document.createElement("h2");_e.className="winners_counter",_e.innerHTML="Winners";const Ee=document.createElement("h3");Ee.className="winners_page",Ee.innerHTML="Page <span>&#8470 </span> 1";const Me=document.createElement("table");Me.className="winners_section winners_table";const be=document.createElement("thead"),Le=document.createElement("tr");Le.className="winners_table_head";const fe=document.createElement("th");fe.innerHTML="&#8470 ";const $e=document.createElement("th");$e.innerHTML="Car";const Te=document.createElement("th");Te.innerHTML="Name";const Ne=document.createElement("th");Ne.className="wins";const ke=document.createElement("span");ke.className="arrow_up inactive ",ke.setAttribute("id","up-arrow-wins"),ke.innerHTML=" &#8679;";const He=document.createElement("span");He.className="arrow_down",He.setAttribute("id","down-arrow-wins"),He.innerHTML=" &#8679;",Ne.innerHTML=" Wins",Ne.appendChild(ke),Ne.appendChild(He);const Ae=document.createElement("th");Ae.className="best_time";const xe=document.createElement("span");xe.className="arrow_up time_up inactive",xe.setAttribute("id","up-arrow-time"),xe.innerHTML=" &#8679;";const Se=document.createElement("span");Se.className="arrow_down time_down",Se.setAttribute("id","down-arrow-time"),Se.innerHTML=" &#8679;",Ae.innerHTML="Best time (sec)",Ae.appendChild(xe),Ae.appendChild(Se),Le.appendChild(fe),Le.appendChild($e),Le.appendChild(Te),Le.appendChild(Ne),Le.appendChild(Ae),be.appendChild(Le);const ze=document.createElement("tbody");ze.className="winners_body",Me.appendChild(be),Me.appendChild(ze),ye.appendChild(_e),ye.appendChild(Ee),ye.appendChild(Me);const Ie=document.createElement("div");Ie.className="winners_pagination";const je=document.createElement("button");je.className="identic_btn pagination_btn winners_page_prev",je.innerHTML="Previous",je.setAttribute("disabled",!0);const qe=document.createElement("span");qe.className="winners_page_current",qe.innerHTML="1";const Be=document.createElement("span");Be.innerHTML="/";const Xe=document.createElement("span");Xe.className="winners_page_total",Xe.innerHTML="1";const Pe=document.createElement("button");Pe.className="identic_btn pagination_btn winners_page_next",Pe.innerHTML="Next",Ie.appendChild(je),Ie.appendChild(qe),Ie.appendChild(Be),Ie.appendChild(Xe),Ie.appendChild(Pe),ye.appendChild(Ie),Ce.appendChild(ye),Y.appendChild(Ce),K.appendChild(Y),G.appendChild(K),document.body.appendChild(G),document.body.appendChild(A),ce.addEventListener("click",(async function(){let e;e=""==te.value?k[Math.floor(Math.random()*k.length)]+" "+H[Math.floor(Math.random()*k.length)]:te.value;const n=ae.value;await C({name:e,color:n}),u(),te.value="",r()})),pe.addEventListener("click",(async function(){for(let e=0;e<100;e++){const e=k[Math.floor(Math.random()*k.length)]+" "+H[Math.floor(Math.random()*H.length)],n=()=>{let e="0123456789ABCDEF",n="#";for(let t=0;t<6;t++)n+=e[Math.floor(Math.random()*e.length)];return n};let t=n();await C({name:e,color:t})}u(),r()})),ue.addEventListener("click",(()=>async function(){document.querySelectorAll(".car").forEach((async e=>{await l(e.id)}))}())),me.addEventListener("click",(()=>X())),re.addEventListener("click",(()=>async function(){const e=le.value,n=oe.value,t=document.querySelector(".active"),a=Number(t.id.replace("-NAME",""));await M(a,{name:e,color:n}),i(e,n,a),re.disabled=!0,document.getElementById(`${a}-NAME`).classList.remove("active"),le.value=""}())),xe.addEventListener("click",(async()=>{const e=await async function(e){const n=await fetch(`${h}${w.winners}${g([{key:"_limit",value:"10"},{key:"_page",value:m},{key:"_sort",value:"time"},{key:"_order",value:"ASC"}])}`,{method:"GET"});return await n.json()}();console.log(e),Se.classList.remove("inactive"),xe.classList.add("inactive"),P(e)})),Se.addEventListener("click",(async()=>{const e=await async function(e){const n=await fetch(`${h}${w.winners}${g([{key:"_limit",value:"10"},{key:"_page",value:m},{key:"_sort",value:"time"},{key:"_order",value:"DESC"}])}`,{method:"GET"});return await n.json()}();Se.classList.add("inactive"),xe.classList.remove("inactive"),P(e)})),ke.addEventListener("click",(async()=>{const e=await async function(e){const n=await fetch(`${h}${w.winners}${g([{key:"_limit",value:"10"},{key:"_page",value:m},{key:"_sort",value:"wins"},{key:"_order",value:"ASC"}])}`,{method:"GET"});return await n.json()}();He.classList.remove("inactive"),ke.classList.add("inactive"),P(e)})),He.addEventListener("click",(async()=>{const e=await async function(e){const n=await fetch(`${h}${w.winners}${g([{key:"_limit",value:"10"},{key:"_page",value:m},{key:"_sort",value:"wins"},{key:"_order",value:"DESC"}])}`,{method:"GET"});return await n.json()}();He.classList.add("inactive"),ke.classList.remove("inactive"),P(e)})),V.addEventListener("click",(()=>{d+=1,ge.innerHTML=`Page  &#8470 ${d}`,F.innerHTML=d,u(),a()})),O.addEventListener("click",(()=>{d-=1,ge.innerHTML=`Page  &#8470 ${d}`,F.innerHTML=d,u(),a()})),je.addEventListener("click",(()=>{m-=1,p(),D.innerHTML=`Page  &#8470 ${m}`,qe.innerHTML=m,c()})),Pe.addEventListener("click",(()=>{m+=1,p(),D.innerHTML=`Page  &#8470 ${m}`,qe.innerHTML=m,c()})),re.addEventListener("click",(async function(){const e=updateCarInput.value,n=colorCarInput.value,t=document.querySelector(".active"),a=Number(t.id.replace("-NAME",""));await M(a,{name:e,color:n}),i(e,n,a),re.disabled=!0,document.getElementById(`${a}-NAME`).classList.remove("active"),updateCarInput.value=""}));const Re=document.querySelector(".to_garage_btn"),De=document.querySelector(".to_winners_btn");Re.addEventListener("click",(function(){Fe.classList.add("invisible"),Ge.classList.remove("invisible")})),De.addEventListener("click",(function(){Ge.classList.add("invisible"),Fe.classList.remove("invisible")}));const Ge=document.querySelector(".garage"),Fe=document.querySelector(".winners");u(),p()})();